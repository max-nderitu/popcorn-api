<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl" href="../../../">
  <title data-ice="title">src/middleware/Cli.js | popcorn-api</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  <script src="script/manual.js"></script>
<meta name="description" content="Popcorn Time API is developed to make it easier for anyone to create their own version of Popcorn Time."><meta property="og:type" content="website"><meta property="og:url" content="https://popcorntime.sh"><meta property="og:site_name" content="popcorn-api"><meta property="og:title" content="popcorn-api"><meta property="og:image" content="https://avatars2.githubusercontent.com/u/7267937"><meta property="og:description" content="Popcorn Time API is developed to make it easier for anyone to create their own version of Popcorn Time."><meta property="og:author" content="https://twitter.com/popcorntimetv"><meta property="twitter:card" content="summary"><meta property="twitter:title" content="popcorn-api"><meta property="twitter:description" content="Popcorn Time API is developed to make it easier for anyone to create their own version of Popcorn Time."><meta property="twitter:image" content="https://avatars2.githubusercontent.com/u/7267937"></head>
<body class="layout-container" data-ice="rootContainer">

<header>
  <a href="./" style="display: flex; align-items: center;"><img src="./image/brand_logo.png" style="width:34px;"></a>
  <a href="./manual/index.html" data-ice="manualHeaderLink">Manual</a>
  <a href="identifiers.html">Reference</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
<a style="position:relative; top:3px;" href="https://github.com/popcorn-official/popcorn-api"><img width="20px" src="./image/github.png"></a></header>

<nav class="navigation" data-ice="nav"><div>
  <ul>
    
  <li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#controllers">controllers</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/controllers/ContentController.js~ContentController.html">ContentController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/controllers/ExportController.js~ExportController.html">ExportController</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/controllers/IndexController.js~IndexController.html">IndexController</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#middleware">middleware</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/middleware/Cli.js~Cli.html">Cli</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-promptSchemas">promptSchemas</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#models-animemovie">models/animemovie</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/models/animemovie/AnimeMovieModel.js~AnimeMovieModel.html">AnimeMovieModel</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#models-animeshow">models/animeshow</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/models/animeshow/AnimeShowModel.js~AnimeShowModel.html">AnimeShowModel</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#models-content">models/content</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/models/content/ContentModel.js~ContentModel.html">ContentModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-contentSchema">contentSchema</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Images">Images</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Rating">Rating</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="http://mongoosejs.com">Model</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#models-movie">models/movie</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/models/movie/MovieModel.js~MovieModel.html">MovieModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-movieSchema">movieSchema</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#models-providerconfig">models/providerconfig</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/models/providerconfig/ProviderConfigModel.js~ProviderConfigModel.html">ProviderConfigModel</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#models-show">models/show</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/models/show/ShowModel.js~ShowModel.html">ShowModel</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-showSchema">showSchema</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-typedef">T</span><span data-ice="name"><span><a href="typedef/index.html#static-typedef-Episode">Episode</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#scraper">scraper</a><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/ChrisAlderson/eztv-api-pt">Eztv</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/ChrisAlderson/fanart.tv-api">Fanart</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/ChrisAlderson/horriblesubs-api">HorribleSubs</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/ChrisAlderson/kat-api-pt">Kat</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/ChrisAlderson/nyaa-api-pt">Nyaa</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/ChrisAlderson/omdb-api-pt">Omdb</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/vankasteelj/tmdbapi">Tmdb</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/vankasteelj/trakt.tv">Trakt</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/edwellbrook/node-tvdb">Tvdb</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-external">E</span><span data-ice="name"><span><a href="https://github.com/ChrisAlderson/yts-api-pt">Yts</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#scraper-configs">scraper/configs</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-eztvConfig">eztvConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-horribleSubsConfig">horribleSubsConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-katMovieConfig">katMovieConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-nyaaCommieConfig">nyaaCommieConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-nyaaFffConfig">nyaaFffConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-nyaaGgConfig">nyaaGgConfig</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-ytsConfig">ytsConfig</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#scraper-helpers">scraper/helpers</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/scraper/helpers/AbstractHelper.js~AbstractHelper.html">AbstractHelper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/scraper/helpers/MovieHelper.js~MovieHelper.html">MovieHelper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/scraper/helpers/ShowHelper.js~ShowHelper.html">ShowHelper</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-interface">I</span><span data-ice="name"><span><a href="class/src/scraper/helpers/IHelper.js~IHelper.html">IHelper</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#scraper-providers">scraper/providers</a><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/scraper/providers/BaseProvider.js~BaseProvider.html">BaseProvider</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/scraper/providers/BulkProvider.js~BulkProvider.html">BulkProvider</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/scraper/providers/MovieProvider.js~MovieProvider.html">MovieProvider</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/scraper/providers/ShowProvider.js~ShowProvider.html">ShowProvider</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-class">C</span><span data-ice="name"><span><a href="class/src/scraper/providers/YtsProvider.js~YtsProvider.html">YtsProvider</a></span></span></li>
<li data-ice="doc"><a data-ice="dirPath" class="nav-dir-path" href="identifiers.html#scraper-providers-maps">scraper/providers/maps</a><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-movieMap">movieMap</a></span></span></li>
<li data-ice="doc"><span data-ice="kind" class="kind-variable">V</span><span data-ice="name"><span><a href="variable/index.html#static-variable-showMap">showMap</a></span></span></li>
</ul>
</div>
</nav>

<div class="content" data-ice="content"><h1 data-ice="title">src/middleware/Cli.js</h1>
<pre class="source-code line-number raw-source-code"><code class="prettyprint linenums" data-ice="content">// Import the necessary modules.
// @flow
/* eslint-disable no-console */
import bytes from &apos;bytes&apos;
import fs from &apos;fs&apos;
import inquirer from &apos;inquirer&apos;
import parseTorrent from &apos;parse-torrent&apos;
import path from &apos;path&apos;
import webtorrentHealth from &apos;webtorrent-health&apos;
import {
  Cli as BaseCli,
  Database
} from &apos;pop-api&apos;

import promptSchemas from &apos;./promptschemas.js&apos;
import {
  AnimeMovie,
  AnimeShow,
  Movie,
  Show
} from &apos;../models&apos;
import {
  MovieHelper,
  ShowHelper
} from &apos;../scraper/helpers&apos;
import {
  MovieProvider,
  ShowProvider
} from &apos;../scraper/providers&apos;

/**
 * Class The class for the command line interface.
 * @type {Cli}
 */
export default class Cli extends BaseCli {

  /**
   * The command line parser to process the Cli inputs.
   * @type {Command}
   */
  program: Object

  /**
   * The name of the Cli program.
   * @type {string}
   */
  name: string

  /**
   * The verion of the Cli program.
   * @type {string}
   */
  version: string

  /**
   * The name of the Cli provider. Default is `Cli`.
   * @type {string}
   */
  static _Name: string = &apos;Cli&apos;

  /**
   * The database middleware from `pop-api`.
   * @type {Database}
   */
  _database: Database

  /**
   * Create a CLI object.
   * @param {!PopApi} PopApi - The PopApi instance to bind the cli to.
   * @param {!Ojbect} options - The options for the cli.
   * @param {?Array&lt;string&gt;} options.argv - The arguments to be parsed by
   * commander.
   * @param {!string} options.name - The name of the Cli program.
   * @param {!string} [options.version] - The version of the Cli program.
   */
  constructor(PopApi: any, {argv, name, version}: Object): void {
    super(PopApi, {name, version})

    /**
      * The database middleware from `pop-api`.
      * @type {Database}
      */
    this.database = new Database(PopApi, {
      database: name
    })

    this.run(PopApi, argv)
  }

  /**
   * Initiate the options for the Cli.
   * @param {!string} version - The version of the Cli program.
   * @returns {undefined}
   */
  initOptions(version: string): void {
    super.initOptions(version)

    return this.program
      .option(&apos;-s, --start&apos;, &apos;Start the scraping process&apos;)
      .option(&apos;--content &lt;type&gt;&apos;,
        &apos;Add content to the MongoDB database (animemovie|animeshow|movie|show).&apos;,
        /^(animemovie|animeshow|movie|show)$/i, false)
      .option(
        &apos;--providers &lt;env&gt;&apos;,
        &apos;Add provider configurations&apos;,
        /^(development|production|test)$/i
      )
      .option(&apos;--export &lt;collection&gt;&apos;,
        &apos;Export a collection to a JSON file.&apos;,
        /^(anime|movie|show)$/i, false)
      .option(&apos;--import &lt;collection&gt;&apos;, &apos;Import a JSON file to the database.&apos;)
  }

  /**
   * Method for displaying the --help option
   * @returns {undefined}
   */
  getHelp(): void {
    const baseHelp = super.getHelp()
    return baseHelp.concat([
      `    $ ${this.name} --content &lt;animemovie|animeshow|movie|show&gt;`,
      `    $ ${this.name} --provider`,
      `    $ ${this.name} --export &lt;anime|movie|show&gt;`,
      `    $ ${this.name} --import &lt;path-to-json&gt;`
    ])
  }

  /**
   * Return a torrent object for a movie.
   * @param {!string} magnet - The magnet url to bind.
   * @param {!Object} health - The health object for seeders and peers.
   * @param {!Object} remote - The remote data object from &apos;parseTorrent&apos;.
   * @returns {Object} - A torrent object for a movie.
   */
  _movieTorrent(magnet: string, health: Object, remote: Object): Object {
    return {
      url: magnet,
      seeds: health.seeds,
      peers: health.peers,
      size: remote.length,
      filesize: bytes(remote.length),
      provider: Cli._Name
    }
  }

  /**
   * Return a torrent object for a show.
   * @param {!string} magnet - The magnet url to bind.
   * @param {!Object} health - The health object for seeders and peers.
   * @returns {Object} - A torrent object for a show.
   */
  _showTorrent(magnet: string, health: Object): Object {
    return {
      url: magnet,
      seeds: health.seeds,
      peers: health.peers,
      provider: Cli._Name
    }
  }

  /**
   * Get a torrent object based on the type.
   * @param {!string} link - The link to bind to the torrent object.
   * @param {!string} type - The type of torrent object (movie|show).
   * @returns {Promise&lt;Object, undefined&gt;} - A torrent object for a movie or
   * show.
   */
  _getTorrent(link: string, type: string): Promise&lt;Object | void&gt; {
    return new Promise((resolve, reject) =&gt; {
      return parseTorrent.remote(link, (err, remote) =&gt; {
        if (err) {
          return reject(err)
        }

        const magnet = parseTorrent.toMagnetURI(remote)
        return webtorrentHealth(magnet).then(health =&gt; {
          const torrent = type === &apos;movie&apos;
            ? this._movieTorrent(magnet, health, remote)
            : this._showTorrent(magnet, health)
          return resolve(torrent)
        })
      })
    })
  }

  /**
   * Handle the --content CLI option to insert a movie torrent.
   * @param {!string} t - The content type to add to the database.
   * @param {!boolean} isAnime=false - True if the content is anime.
   * @returns {Promise&lt;Movie, Error&gt;} - The inserted movie.
   */
  _moviePrompt(t: string, isAnime: boolean = false): Promise&lt;Movie | Error&gt; {
    const { imdb, torrent, movieQuality, language } = promptSchemas
    const movieSchema: Array&lt;Object&gt; = [
      imdb,
      torrent,
      movieQuality,
      language
    ]

    return this.database.connect().then(() =&gt; {
      return inquirer.prompt(movieSchema).then(res =&gt; {
        const { imdb, quality, language, torrent } = res
        const movie = {
          slugYear: imdb,
          torrents: {}
        }
        const contentType = MovieProvider.ContentTypes.Movie
        const movieProvider = new MovieProvider({}, {})
        movieProvider.setConfig({
          name: Cli._Name,
          Helper: MovieHelper,
          Model: isAnime ? AnimeMovie : Movie,
          contentType
        })

        return this._getTorrent(torrent, contentType).then(res =&gt; {
          movieProvider.attachTorrent({
            movie,
            quality,
            torrent: res,
            lang: language
          })

          return movieProvider.getContent(movie)
        })
      })
    }).then(() =&gt; this.database.disconnect())
      .then(() =&gt; process.exit(0))
      .catch(err =&gt; {
        console.error(`An error occurred: &apos;${err}&apos;`)
        return process.exit(1)
      })
  }

  /**
   * Handle the --content CLI option to insert a movie torrent.
   * @param {!string} t - The content type to add to the database.
   * @param {!boolean} isAnime=false - True if the content is anime.
   * @returns {Promise&lt;Show, Error&gt;} - The inserted show.
   */
  _showPrompt(t: string, isAnime: boolean = false): Promise&lt;Show | Error&gt; {
    const {
      imdb,
      torrent,
      showQuality,
      season,
      episode,
      dateBased
    } = promptSchemas
    const showSchema: Array&lt;Object&gt; = [
      imdb,
      torrent,
      showQuality,
      season,
      episode,
      dateBased
    ]

    return this.database.connect().then(() =&gt; {
      return inquirer.prompt(showSchema).then(res =&gt; {
        const { imdb, season, episode, quality, dateBased, torrent } = res
        const show = {
          slug: imdb,
          dateBased,
          episodes: {}
        }
        const contentType = MovieProvider.ContentTypes.Show
        const showProvider = new ShowProvider({}, {})
        showProvider.setConfig({
          name: Cli._Name,
          Helper: ShowHelper,
          Model: isAnime ? AnimeShow : Show,
          contentType
        })

        return this._getTorrent(torrent, contentType).then(res =&gt; {
          showProvider.attachTorrent({
            show,
            torrent: res,
            season,
            episode,
            quality
          })

          return showProvider.getContent(show)
        })
      })
    }).then(() =&gt; this.database.disconnect())
      .then(() =&gt; process.exit(0))
      .catch(err =&gt; {
        console.error(`An error occurred: &apos;${err}&apos;`)
        return process.exit(1)
      })
  }

  /**
   * Handle the --content CLI option.
   * @param {!string} t - The content type to add to the database.
   * @returns {Promise&lt;Movie|Show, Error&gt;|undefined} - The inserted movie or
   * show.
   */
  _content(t: string): Promise&lt;Movie | Show | Error&gt; {
    switch (t) {
      case &apos;animemovie&apos;:
        return this._moviePrompt(t, true)
      case &apos;movie&apos;:
        return this._moviePrompt(t)
      case &apos;animeshow&apos;:
        return this._showPrompt(t, true)
      case &apos;show&apos;:
        return this._showPrompt(t)
      default:
        console.error(`&apos;${t}&apos; is not a valid option for content!`)
        return Promise.reject(process.exit(1))
    }
  }

  /**
   * Handle the --export CLI option.
   * @param {!string} e - The collection to export.
   * @returns {Promise&lt;string, undefined&gt;} - The promise to export a collection.
   */
  _export(e: string): Promise&lt;string | void&gt; {
    process.env.TEMP_DIR = process.env.TEMP_DIR || path.join(...[
      __dirname,
      &apos;..&apos;,
      &apos;..&apos;,
      &apos;tmp&apos;
    ])
    const tempDir = process.env.TEMP_DIR

    return this.database.exportFile(e, path.join(...[
      tempDir,
      `${e}s.json`
    ]))
      .then(() =&gt; process.exit(0))
      .catch(err =&gt; {
        console.error(`An error occurred: ${err}`)
        return process.exit(1)
      })
  }

  /**
   * Handle the --import CLI option.
   * @param {!string} i - The collection to import.
   * @throws {Error} - Error: no such file found for &apos;JSON_FILE&apos;
   * @returns {Promise&lt;string, undefined&gt;|undefined} - The promise to import a
   * collection.
   */
  _import(i: string): Promise&lt;string | void&gt; {
    if (!fs.existsSync(i)) {
      console.error(`File &apos;${i}&apos; does not exists!`)
      return Promise.reject(process.exit(1))
    }

    const { confirm } = promptSchemas
    return inquirer.prompt([confirm]).then(({ confirm }) =&gt; {
      if (confirm) {
        return this.database.importFile(path.basename(i, &apos;.json&apos;), i)
      }

      return process.exit(0)
    }).catch(err =&gt; {
      console.error(`An error occurred: ${err}`)
      return process.exit(1)
    })
  }

  /**
   * Run the Cli program.
   * @param {!PopApi} PopApi - The PopApi instance to bind the options to.
   * @param {?Array&lt;string&gt;} argv - The arguments to be parsed by commander.
   * @returns {undefined}
   */
  run(PopApi: any, argv?: Array&lt;string&gt;): any {
    if (argv) {
      this.program.parse(argv)
    }

    if (this.program.content) {
      return this._content(this.program.content)
    } else if (this.program.export) {
      return this._export(this.program.export)
    } else if (this.program.import) {
      return this._import(this.program.import)
    }

    if (this.program.start) {
      PopApi.startScraper = true
    }

    return super.run(PopApi)
  }

}
</code></pre>

</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(1.0.4)</span><img src="./image/esdoc-logo-mini-black.png"></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
